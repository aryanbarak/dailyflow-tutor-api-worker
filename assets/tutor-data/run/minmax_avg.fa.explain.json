{
  "schema_name": "tutor_asset.explain.v1",
  "version": "1.0",
  "topic": "minmax_avg",
  "lang": "fa",
  "mode": "explain",
  "title": "Min/Max/Average (کمینه/بیشینه/میانگین) — FIAE Explain Core v1.0",
  "summary": "**Min/Max/Average (کمینه/بیشینه/میانگین)** یک الگوریتم پایه است که برای یافتن **کوچکترین**، **بزرگترین** و **میانگین** عناصر یک آرایه استفاده می‌شود.\n\n**اصل:**\n- آرایه را یک‌بار بپیما (O(n))\n- در هر مرحله:\n  - اگر عنصر کوچکتر از min → min را بروزرسانی کن\n  - اگر عنصر بزرگتر از max → max را بروزرسانی کن\n  - عنصر را به sum اضافه کن\n- در پایان: avg = sum / n\n\n**نام:** «کمینه/بیشینه/میانگین» — سه آمار مهم در یک گذر\n\n**اهمیت IHK:**\n- الگوریتم خطی ساده: O(n)\n- مقداردهی اولیه صحیح: min = max = a[0] (نه 0!)\n- تقسیم صحیح در avg (integer division)\n- تفاوت بین یافتن مقدار و یافتن اندیس",
  "blocks": [
    {
      "kind": "definition",
      "text": "**Min/Max/Average (کمینه/بیشینه/میانگین)** یک الگوریتم پایه است که برای یافتن **کوچکترین**، **بزرگترین** و **میانگین** عناصر یک آرایه استفاده می‌شود.\n\n**اصل:**\n- آرایه را یک‌بار بپیما (O(n))\n- در هر مرحله:\n  - اگر عنصر کوچکتر از min → min را بروزرسانی کن\n  - اگر عنصر بزرگتر از max → max را بروزرسانی کن\n  - عنصر را به sum اضافه کن\n- در پایان: avg = sum / n\n\n**نام:** «کمینه/بیشینه/میانگین» — سه آمار مهم در یک گذر\n\n**اهمیت IHK:**\n- الگوریتم خطی ساده: O(n)\n- مقداردهی اولیه صحیح: min = max = a[0] (نه 0!)\n- تقسیم صحیح در avg (integer division)\n- تفاوت بین یافتن مقدار و یافتن اندیس"
    },
    {
      "kind": "idea",
      "text": "TBD"
    },
    {
      "kind": "procedure",
      "text": "**مرحله 1: بررسی آرایه خالی**\n```\nاگر n = 0:\n  خطا برگردان (تقسیم بر صفر)\n```\n\n**مرحله 2: مقداردهی اولیه**\n```\nmin = a[0]    // نه 0 — برای اعداد منفی اشتباه است!\nmax = a[0]    // نه 0\nsum = a[0]    // یا sum = 0 اگر از i=0 شروع می‌کنی\n```\n\n**مرحله 3: پیمایش آرایه (i = 1 تا n-1)**\n```\nبرای هر عنصر a[i]:\n  اگر a[i] < min:\n    min = a[i]        // بروزرسانی کمینه\n  \n  اگر a[i] > max:\n    max = a[i]        // بروزرسانی بیشینه\n  \n  sum = sum + a[i]    // جمع برای میانگین\n```\n\n**مرحله 4: محاسبه میانگین**\n```\navg = sum / n\n```\n\n**دقت:** تقسیم صحیح!\n- در Python 3: 7 / 2 = 3.5 (float)\n- در Java/C: 7 / 2 = 3 (int)\n- برای float: float(sum) / n\n\n**مرحله 5: بازگشت نتیجه**\n```\nبرگردان (min, max, avg)\n```"
    },
    {
      "kind": "example",
      "text": "TBD"
    },
    {
      "kind": "complexity",
      "text": "**زمان (Time):**\n- **همه نسخه‌ها:** O(n) — خطی\n- دلیل: یک بار کل آرایه را می‌پیماییم\n- تعداد مقایسه‌ها: 2n (برای min و max)\n\n**حافظه (Space):**\n- **همه نسخه‌ها:** O(1) — ثابت\n- فقط متغیرهای min, max, sum, avg\n- بدون آرایه یا لیست اضافی\n\n**بهینگی:**\n- **بهترین حالت:** O(n) — همیشه باید کل آرایه را بپیماییم\n- **بدترین حالت:** O(n) — همیشه\n- **میانگین حالت:** O(n) — همیشه\n\n**نکته:** نمی‌توان سریع‌تر از O(n) بود — باید هر عنصر را حداقل یک‌بار ببینیم\n\n**مقایسه با الگوریتم‌های دیگر:**\n- سریع‌تر از مرتب‌سازی: O(n) در مقابل O(n²) یا O(n log n)\n- مشابه LinearSearch: هر دو خطی، ولی MinMaxAvg همه عناصر را بررسی می‌کند"
    },
    {
      "kind": "ihk_traps",
      "text": "**1) مقداردهی اولیه اشتباه:**\n- ❌ **غلط:** min = 0 یا max = 0\n- ✓ **درست:** min = max = a[0]\n- **دلیل:** اگر همه اعداد منفی باشند، min/max اشتباه می‌شود\n- **مثال:** [-5, -2, -8] با min=0 → min اشتباه است (باید -8 باشد)\n\n**2) تقسیم صحیح (Integer Division):**\n- ❌ **غلط:** avg = sum / n بدون دقت به نوع\n- ✓ **درست:** در Python 3: 7/2 = 3.5 (خودکار float)\n- ✓ **درست:** در Java/C: float(sum) / n یا sum / (float)n\n- **مثال:** [1, 2, 3] → sum=6, n=3 → avg=2.0 (نه 2)\n\n**3) sum را فراموش کردن یا reset کردن:**\n- ❌ **غلط:** sum را در حلقه به 0 تنظیم کردن\n- ✓ **درست:** sum = a[0] قبل از حلقه، سپس sum += a[i]\n\n**4) شرط‌های < و > را جابجا کردن:**\n- ❌ **غلط:** WENN a[i] > min DANN min = a[i]\n- ✓ **درست:** WENN a[i] < min DANN min = a[i]\n- **یادآوری:** < برای min، > برای max\n\n**5) استفاده از WENN...SONST برای min/max:**\n- ❌ **غلط:**\n  ```\n  WENN a[i] < min DANN\n    min = a[i]\n  SONST WENN a[i] > max DANN\n    max = a[i]\n  ```\n- ✓ **درست:** دو شرط جداگانه (یک عنصر می‌تواند هم min و هم max باشد)\n\n**6) آرایه خالی را بررسی نکردن:**\n- ❌ **غلط:** بدون بررسی n = 0\n- ✓ **درست:** WENN n = 0 DANN GIB FEHLER ZURUECK\n- **دلیل:** تقسیم بر صفر در avg\n\n**7) اندیس را با مقدار اشتباه گرفتن:**\n- ❌ **غلط:** min = i (اندیس)\n- ✓ **درست:** min = a[i] (مقدار)\n\n**8) دسترسی اشتباه به فیلد (برای آبجکت‌ها):**\n- ❌ **غلط:** arr[field] یا arr.field\n- ✓ **درست:** arr[i][field] یا arr[i].field\n- **دلیل:** field یک پارامتر است، نه نام ثابت\n\n**9) فراموش کردن بروزرسانی اندیس:**\n- ❌ **غلط:** فقط min = a[i] بدون minIndex = i\n- ✓ **درست:** هم مقدار و هم اندیس را بروزرسانی کن"
    },
    {
      "kind": "variants",
      "text": "**1) classic_minmax_avg (کلاسیک کامل):**\n- **ورودی:** آرایه عدد\n- **خروجی:** min, max, avg\n- **مثال:** [5, 2, 8, 3] → min=2, max=8, avg=4.5\n- **یک گذر:** همه را هم‌زمان محاسبه می‌کند\n\n**2) min_only (فقط کمینه):**\n- **ورودی:** آرایه عدد\n- **خروجی:** min, minIndex\n- **مثال:** [5, 2, 8, 3] → min=2, minIndex=1\n- **کاربرد:** وقتی فقط کمینه لازم است\n\n**3) max_only (فقط بیشینه):**\n- **ورودی:** آرایه عدد\n- **خروجی:** max, maxIndex\n- **مثال:** [5, 2, 8, 3] → max=8, maxIndex=2\n- **شرط:** > (نه <)\n\n**4) average_only (فقط میانگین):**\n- **ورودی:** آرایه عدد\n- **خروجی:** avg\n- **مثال:** [5, 2, 8, 3] → avg=4.5\n- **دقت:** تقسیم صحیح: 7/2 = 3 (نه 3.5)\n\n**5) minmax_only (بدون میانگین):**\n- **ورودی:** آرایه عدد\n- **خروجی:** min, max\n- **مثال:** [5, 2, 8, 3] → min=2, max=8\n- **نکته:** دو شرط جداگانه (نه WENN...SONST)\n\n**6) minmax_avg_by_field (فیلد آبجکت):**\n- **ورودی:** آرایه آبجکت + field\n- **خروجی:** min, max, avg فیلد\n- **مثال:** [{note: 2}, {note: 3}] → min=2, max=3, avg=2.5\n- **دسترسی:** arr[i][field]\n\n**7) minmax_with_indices (با اندیس‌ها):**\n- **ورودی:** آرایه عدد\n- **خروجی:** min, minIndex, max, maxIndex\n- **مثال:** [5, 2, 8, 3] → min=2, minIndex=1, max=8, maxIndex=2\n- **کاربرد:** پیدا کردن موقعیت کمینه/بیشینه\n\n**قانون کلی:**\n- همه نسخه‌ها خطی هستند: O(n)\n- مقداردهی اولیه: همیشه با a[0] (نه 0)\n- آرایه خالی: بررسی کن (n = 0)"
    }
  ]
}
